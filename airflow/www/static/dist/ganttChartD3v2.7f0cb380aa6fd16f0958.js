!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ganttChartD3v2=e():(t.Airflow=t.Airflow||{},t.Airflow.ganttChartD3v2=e())}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}({8:function(t,e){const n={a:"ddd",A:"dddd",b:"MMM",B:"MMMM",c:"lll",d:"DD","-d":"D",e:"D",F:"YYYY-MM-DD",H:"HH","-H":"H",I:"hh","-I":"h",j:"DDDD","-j":"DDD",k:"H",l:"h",m:"MM","-m":"M",M:"mm","-M":"m",p:"A",P:"a",S:"ss","-S":"s",u:"E",w:"d",W:"WW",x:"ll",X:"LTS",y:"YY",Y:"YYYY",z:"ZZ",Z:"z",f:"SSS","%":"%"};moment.fn.strftime=function(t){var e;return e=t.split(/(%\-?.)/).map((function(t){return"%"===t[0]&&n.hasOwnProperty(t.substr(1))?n[t.substr(1)]:t.length>0?"["+t+"]":t})).join(""),this.format(e)},d3.gantt=function(){var t=d3.tip().attr("class","tooltip d3-tip").offset([-10,0]).html(t=>tiTooltip(t,{includeTryNumber:!0})),e={top:20,right:40,bottom:20,left:150},n="body",r=d3.time.day.offset(new Date,-3),a=d3.time.hour.offset(new Date,3),o="fit",i=[],d=document.body.clientHeight-e.top-e.bottom-5,l=$(".gantt").width()-e.right-e.left-5,c="%H:%M",u=function(t){return t.start_date+t.task_id+t.end_date},s=function(t){return"translate("+(m(t.start_date.valueOf())+220)+","+p(t.task_id)+")"};function f(t){return moment(t).strftime(c)}var m=d3.time.scale().domain([r,a]).range([0,l-220]).clamp(!0),p=d3.scale.ordinal().domain(i).rangeRoundBands([0,d-e.top-e.bottom],.1),h=d3.svg.axis().scale(m).orient("bottom").tickFormat(f).tickSubdivide(!0).tickSize(8).tickPadding(8),g=d3.svg.axis().scale(p).orient("left").tickSize(0),b=function(t){if("fit"===o){if(void 0===t||t.length<1)return r=d3.time.day.offset(new Date,-3),void(a=d3.time.hour.offset(new Date,3));t.forEach(t=>{t.start_date instanceof moment||(t.start_date=moment(t.start_date)),t.end_date instanceof moment||(t.end_date=moment(t.end_date))}),a=moment.max(t.map(t=>t.end_date)).valueOf(),r=moment.min(t.map(t=>t.start_date)).valueOf()}},v=function(){m=d3.time.scale().domain([r,a]).range([0,l-220]).clamp(!0),p=d3.scale.ordinal().domain(i).rangeRoundBands([0,d-e.top-e.bottom],.1),h=d3.svg.axis().scale(m).orient("bottom").tickFormat(f).tickSubdivide(!0).tickSize(8).tickPadding(8),g=d3.svg.axis().scale(p).orient("left").tickSize(0)};function y(r){b(r),v();var a=d3.select(n).append("svg").attr("class","chart").attr("width",l+e.left+e.right).attr("height",d+e.top+e.bottom).append("g").attr("class","gantt-chart").attr("width",l+e.left+e.right).attr("height",d+e.top+e.bottom).attr("transform","translate("+e.left+", "+e.top+")");return a.selectAll(".chart").data(r,u).enter().append("rect").on("mouseover",t.show).on("mouseout",t.hide).on("click",(function(t){call_modal(t.task_id,t.execution_date,t.extraLinks)})).attr("class",(function(t){return t.state||"null"})).attr("y",0).attr("transform",s).attr("height",(function(t){return p.rangeBand()})).attr("width",(function(t){return d3.max([m(t.end_date.valueOf())-m(t.start_date.valueOf()),1])})),a.append("g").attr("class","x axis").attr("transform","translate(220, "+(d-e.top-e.bottom)+")").transition().call(h),a.append("g").attr("class","y axis").transition().attr("transform","translate(220, 0)").call(g),a.call(t),y}return y.redraw=function(t){b(t),v();var e=d3.select(".chart"),n=e.select(".gantt-chart").selectAll("rect").data(t,u);return n.enter().insert("rect",":first-child").attr("rx",5).attr("ry",5).attr("class",(function(t){return t.state||"null"})).transition().attr("y",0).attr("transform",s).attr("height",(function(t){return p.rangeBand()})).attr("width",(function(t){return d3.max([m(t.end_date.valueOf())-m(t.start_date.valueOf()),1])})),n.exit().remove(),e.select(".x").transition().call(h),e.select(".y").transition().call(g),y},y.margin=function(t){return arguments.length?(e=t,y):e},y.timeDomain=function(t){return arguments.length?(r=+t[0],a=+t[1],y):[r,a]},y.timeDomainMode=function(t){return arguments.length?(o=t,y):o},y.taskTypes=function(t){return arguments.length?(i=t,y):i},y.width=function(t){return arguments.length?(l=+t,y):l},y.height=function(t){return arguments.length?(d=+t,y):d},y.tickFormat=function(t){return arguments.length?(c=t,y):c},y.selector=function(t){return arguments.length?(n=t,y):n},y}}})}));